{\rtf1\ansi\ansicpg1252\cocoartf1138
{\fonttbl\f0\fswiss\fcharset0 Helvetica;\f1\fmodern\fcharset0 Courier-BoldOblique;\f2\fmodern\fcharset0 Courier;
\f3\fmodern\fcharset0 Courier-Bold;}
{\colortbl;\red255\green255\blue255;}
\paperw11900\paperh16840\vieww12000\viewh15840\viewkind0
\deftab720
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\f0\b\fs24 \cf0 Oli Larkin IPlug Examples Instructions\

\b0 www.olilarkin.co.uk\
\
This folder contains example/template projects to demonstrate how to use different features of my modified IPlug and WDL. They also serve as a testbed to make sure that the various aspects of the framework are working. Some of the examples are based on work by Theo Nisslink (Tale).\
\
Projects are provided for Visual Studio 2010 and Xcode 3. The projects will not work straight away in Xcode4 and it will probably break other stuff such as build scripts. I have to recommend you avoid Xcode 4 for now! Visual Studio 2005 projects are also included and are necessary only for building RTAS because the Avid/Digidesign libraries are built with 2005 and are cannot be linked with 2010. You cannot downgrade the VS2010 projects to work with VS2008.\
\
For info about installing xcode 3.2.6 on Lion see here\
\
http://anatomicwax.tumblr.com/post/8064949186/installing-xcode-3-2-6-on-lion-redux\
\
To build 64 bit binaries on windows, using VS2010 express, you need to have installed the Windows SDK 7.1. Alternatively if you have VS2010 professional, you may need to change the PlatformToolset to "v100" instead of "Windows7.1SDK" in all .vcxproj files, because the projects were made with the express version.\
\
Requirements:\
\

\b Windows\
\

\b0 - VS2010 Express c++ & Windows SDK 7.1 or VS2010 Professional\
- VS2005 Express c++ & Platform SDK or VS2005 Professional (for RTAS)\
- Python 2.x http://www.python.org/\
- Msysgit http://code.google.com/p/msysgit/\
- Innosetup http://www.jrsoftware.org/isinfo.php\
- 7zip http://www.7-zip.org/\
\

\b Mac\
\

\b0 - Xcode 3.26 including command-line tools (Xcode4 is not working right now and you can't have it alongside, because you can only have one copy of the command-line tools installed)\
- Iceberg http://s.sudre.free.fr/Software/Iceberg.html\
- git http://code.google.com/p/git-osx-installer/\
- setfileicon utility http://maxao.free.fr/telechargements/setfileicon.gz\
\
\
The IPlugMultiTargets project is the main starting project, and if you wish to support multiple targets you should start by duplicating this (see below) and then removing the bits you don't need manually.\
\

\b VST2
\b0 \
\
You need to two files from the Steinberg VST2.4 SDK to the folder VST_SDK, see VST_SDK/readme.txt\
\
- On OSX by default I build to the system VST2 folder /Library/Audio/Plug-Ins/VST/ - You will need to have write permissions to this folder. If you want to build to the user audiounits folder, you'll need to edit the .xconfig file and also modify the installer scripts\
\

\b VST3\

\b0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720
\cf0 Extract the entire Steinberg VST3.5 SDK to the folder VST3_SDK. On Windows there is an extra VS2010 .vcxproj file to compile the steinberg base library for x86 and x64 using vs2010 - make sure you don't delete it by accident.  
\i VST3_SDK\\base\\win\\base_vc10.vcxproj\

\i0 \
- On windows, make sure you have a folder 
\i "C:\\Program Files\\Common Files\\VST3", 
\i0 otherwise the copy files build stage will cause the build to fail\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720
\cf0 - On OSX by default I build to the system VST3 folder /Library/Audio/Plug-Ins/VST3/ - You will need to have write permissions to this folder. If you want to build to the user audiounits folder, you'll need to edit the .xconfig file and also modify the installer scripts\
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720
\cf0 \
\pard\tx220\tx720\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720\li720\fi-720
\cf0 \

\b RTAS
\b0 \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720
\cf0 \
- Sign up to be a registered avid plugin developer. Once you have access to it, Extract PT_90_PlugInSDK.zip into the PT9_SDK folder. Run config_SDK_for_Mac.command to develop on mac. On windows you need VS2005 to compile for RTAS.  You can find links to the VS2005 express version here: http://apdubey.blogspot.com/2009/04/microsoft-visual-studio-2005-express.html . If you use the express version, you will also need the Platform SDK http://www.microsoft.com/download/en/details.aspx?displaylang=en&id=3069. The easiest way to allow MSVC to find the platform sdk is:\
\
1. Create a directory "PlatformSDK" under "%ProgramFiles%\\Microsoft Visual Studio 8\\VC"\
2. Copy the "bin", "include" and "lib" directory from the PSDK-installation into this directory. \
\
(info from http://social.msdn.microsoft.com/forums/en-US/vcgeneral/thread/2bfed529-fb6d-48a3-ad48-fc6301486646/)\
\
- On windows, the debug builds of the RTAS plugin will not be recognised by ProTools. This is true of the Digidesign examples as well for the PT8 and PT9 sdks, PT7 works however. I have found that enabling debug symbols in the release build was sufficient to allow me to debug my plugins.\
\
- By default the Digidesign PluginLibrary.lib static libraries are built to link dynamically to the MSVC libraries\'85 i.e. /MD instead of /MT. You need to change this setting to /MT when you build IPlugMultiTargets, unless you want to link dynamically (see below) in which case you need to change the settings in all the IPlug projects.\
\
- On windows, make sure you have a folder "C:\\Program Files\\Digidesign\\ProTools_3PDev\\dae\\Plug-Ins", otherwise the copy files build stage will cause the build to fail\
\

\b AudioUnits
\b0 \
\
- When building AUs, bear in mind that some hosts keep a cache... see debugging notes below.\
- there is a special shell script validate_audiounit.command that will run auval with the correct IDs for your plugin (see below) and can also set up the auval leaks test, which is useful for debugging\
- By default I build to the system audiounits folder /Library/Audio/Plug-Ins/Components/ - You will need to have write permissions to this folder. If you want to build to the user audiounits folder, you'll need to edit the .xconfig file and also modify the installer scripts\
\

\b Standalone
\b0 \
\
- Audio and Midi is provided via RTAudio and RTMidi by Gary Scavone. To build on windows you need to extract some files into ASIO_SDK, see ASIO_SDK/readme.txt\
\

\b IOS
\b0 \
\
- Make sure you have Xcode 3.2.6 and iOS SDK 4.3 or Xcode 4.x and iOS SDK 4.3, from apple. In order to actually put an app on a device, you need to sign up and pay for an IOS developer membership.\
- NOTE: IPlug on IOS doesn't use IGraphics or IControl etc\'85 you have to implement a new gui using apple's UIKit, an example is provided which illustrates how to communicate with the normal IPlug code. If you're project is for multiple targets, you need to #ifndef OS_ IOS around any code that uses IPlug's graphics facilities.\
\

\b Windows Issues\
\

\b0 The template projects all use static linking with the MSVC runtime libraries (/MT). If you change that you will need to provide the MSVC redistributables in your installer, google for:
\b \

\b0 \
Microsoft Visual C++ 2005 SP1 Redistributable Package \
Microsoft Visual C++ 2010 Redistributable Package\
\
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\b\fs26 \cf0 Duplicating Projects\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\fs24 \cf0 \

\b0 The IPlugExamples folder contains a python script to duplicate an IPlug project. This allows you to very quickly create a new project based on one of the examples. It does a multiple file find and replace to substitute the new name of the project for the old name, and also to change the manufacturer name. Once you have done this you only need to change two more things by hand in resource.h to make your plugin unique.\
\
You can duplicate a project as follows with the following commands in the OSX terminal or on the windows command prompt. In this example i will copy the IPlugEffect project to a new project called MyNewPlugin\'85\
\
- open terminal or cmd.exe and navigate to the IPlugExamples folder\
- type \
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\f1\i\b \cf0 	duplicate.py [inputprojectname] [outputprojectname] [manufacturername]\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\f0\i0\b0 \cf0 \
e.g\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\f2 \cf0 	
\f1\i\b duplicate.py IPlugEffect MyNewPlugin OliLarkin\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\f0\i0\b0 \cf0 \
you might need to do 
\f1\i\b ./duplicate.py
\f0\i0\b0  on OSX\
\
- open  
\f3\b MyNewPlugin/resource.h
\f0\b0  and change 
\f3\b PLUG_UNIQUE_ID
\f0\b0  and 
\f3\b PLUG_MFR_ID
\f0\b0 \
\
\pard\tx566\tx1133\tx1700\tx2267\tx2834\tx3401\tx3968\tx4535\tx5102\tx5669\tx6236\tx6803\pardeftab720

\b\fs26 \cf0 Debugging Setups\
\
\pard\tx560\tx1120\tx1680\tx2240\tx2800\tx3360\tx3920\tx4480\tx5040\tx5600\tx6160\tx6720\pardeftab720

\b0\fs24 \cf0 To debug plugins in different hosts, I have added common OSX hosts to the "Executables" section in Xcode3. This information is store in a .pbxuser file, which is tied to your osx username. There is a shell script setup_debugging.command which will rename all the oli.pbxuser files to yourosxusername.pbxuser.\
\
To debug an au using auval, remember to change the auval executable arguments to match plugin's type and IDs: aufx/aumf/aumu PLUG_UNIQUE_ID PLUG_MFR_ID\
\
AU hosts cache information about the plugin I/O channels etc, so I have added a build script that deletes the caches after a build.\
\
There is also a validate_audiounit.command shell script which will is a helper that runs auval with your plugins' unique IDs, and optionally performs the leaks test.\
\
The windows debug setups use VSTHost http://www.hermannseib.com/english/vsthost.htm for vst2 debugging, and VST3PluginTestHost for vst3 debugging (in steinberg vst3.5 sdk)\
\

\b Installers & one-click build scripts\
\

\b0 The example projects contain shell scripts for both windows and OSX that build everything and package the products in an installer including license, readme and manual. On windows the installer program "Innosetup" is used, on OSX "Iceberg". A python script "update_version.py" is called to look at resource.h and get the version from the PLUG_VER define. It then updates the info.plist files and installer scripts with the version number (in the format major.minor.bugfix). If you aren't building some components, e.g. RTAS, the build scripts may need to be modified. Please alter the license and readme text and remove my name from them if you release a plugin publicly. \
\
}